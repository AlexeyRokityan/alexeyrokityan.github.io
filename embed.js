!function(){"use strict";var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;const s={token:e=>({data:String(e)})},d=(c=((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&a(e,r,t[r]);if(n)for(var r of n(t))i.call(t,r)&&a(e,r,t[r]);return e})({},{eventLoaded:"EVENT_LOADED",initFinished:"EVENT_FINISHED",eventTransport:"EVENT_TRANSPORT",eventRestart:"EVENT_RESTART",eventRedirect:"EVENT_REDIRECT"}),t(c,r({handlers:s})));var c,l=Object.defineProperty,p=Object.defineProperties,u=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&b(e,r,t[r]);if(m)for(var r of m(t))w.call(t,r)&&b(e,r,t[r]);return e};const y=e=>{if(!e.host)throw new Error("Parameter host is required");const t=e.host.querySelector("iframe");if(t){window.chinor.params=e;const{origin:r}=window.location;t.setAttribute("src",`index.html?domain=${r}`)}};window.chinor=((e,t)=>p(e,u(t)))(f({},window.chinor),{run:e=>{if(!e.host)throw new Error("Parameter host is required");window.chinor.params=e;const{origin:t}=window.location;let r=e.host.querySelector("iframe");r?r.setAttribute("src",`index.html?domain=${t}`):(r=document.createElement("iframe"),r.setAttribute("src",`index.html?domain=${t}`),r.setAttribute("width",e.width||"100%"),r.setAttribute("height",e.height||"100%"),r.setAttribute("frameborder","0"),r.setAttribute("allowpaymentrequest",""),window.addEventListener("message",(e=>{const t=window.chinor.params,n=e.data;if(n.type===d.eventLoaded)((e,t)=>{if(!(null==e?void 0:e.contentWindow))return;const r=Object.keys(t||{}).map((e=>{var r,n;if(e in d.handlers)return"CSV"===(null==(r=d.handlers[e](t[e]))?void 0:r.format)?{name:e,value:{data:null==(n=d.handlers[e](t[e]).value)?void 0:n.split(",")}}:{name:e,value:d.handlers[e](t[e])}})).filter(Boolean).reduce(((e,t)=>t?(e[t.name]=t.value.data,e):e),{});e.contentWindow.postMessage({type:d.eventTransport,params:r}),e.contentWindow.postMessage({type:d.initFinished})})(r,t);else if(n.type===d.eventRestart)y(f(f({},t),n.data));else if(n.type===d.eventRedirect){const{url:e,target:t}=n.data,r=document.createElement("a");r.href=e,r.target=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}})),e.host.append(r))},restart:y})}();